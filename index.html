<!DOCTYPE html> 
<html> 
<!-- The following code has been developed by students and/or researchers of the Freshman Research Initiative, DIY Diagnostics Stream at The University of Texas at Austin.  This code is shared for demonstration purposes and should not be considered a product -- it is for entertainment purposes only.  Any user of this code does so at their own risk. Members of the DIY Stream, FRI, and The University of Texas system are not liable for anything related to this code.
 
  THIS CODE SHOULD NOT BE USED TO DIAGNOSE ANY KIND OF MEDICAL CONDITION.
 
  Further Information:
  http://cns.utexas.edu/fri
 
  Research Educator:
  Timothy E. Riedel
  triedel@utexas.edu
 
  Authors in chronological order of contribution:
  Author 1: Timothy E. Riedel
  Author 2: Daniel Fan
  
  References:
  http://docs.webplatform.org/wiki/concepts/programming/drawing_images_onto_canvas#Loading_the_image_programmatically
  http://www.html5rocks.com/en/tutorials/file/dndfiles/
  http://www.w3.org/TR/FileAPI/
  http://mobilehtml5.org/
  http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios
  
  Brief Description of Goal of Code:
  Allow users to make changes to the HTML canvas element by adding a rectangle, picture from the web, text, and clearing the canvas. 
 
  Known Issues:
  The canvas element has a bit of scaling issues when accessed from a mobile device, works fine on PC though.
-->
  <head> 
      <title>App6---HTML5-Canvas</title>  
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <link rel="stylesheet" href="w3.css">
      <link rel="stylesheet" href="w3-colors-flat.css">
   </head> 
<script>

//	var docMod = document.lastModified; // loads last modified time stamp into docMod variable
//	alert("This file last modified " + docMod); // generates alert box with time stamp. If annoying, comment out this entire line.
//	console.log("This file last modified " + docMod); // generates message in javaScript console (found in developers tools) with time stamp. 

	function drawRectangle() { // this creates a function that draws a rectangle on the HTML canvas element 
		var aRectangle = document.getElementById("a"); //this creates a variable that retrieves the canvas element created below that matches the ID "a" from the DOM 
		var aContext = aRectangle.getContext("2d"); //this creates a variable that uses the getContext() method and sets the 2D context of the canvas element (retrieved through the aRectangle variable) that basically allows for more methods and properties (like fillRect, fillStyle, beginPath etc) to be "drawn" and applied to the canvas element. the "2d" part specifies a x,y cartisian coordinate system 
		aContext.fillRect(100,100,75,100); // this uses the aContext variable to call the fillRect() method that draws a rectangle at (100,100) of the canvas coordinate system (x=100, y=100), specified by the first 2 numbers of the method. The next two numbers specify the width (which is set to 75 pixels) and the height (which is 100 pixels)  
	}

	function drawName() { // this creates a function that prints my name as text on the HTML canvas element 
		var aName = document.getElementById("a"); //reference the comment with this code under the drawRectangle function
		var aContext = aName.getContext("2d"); //reference the comment with this code under the drawRectangle function
		aContext.font = "bold 24px sans-serif"; //this sets the font style to 24 pixels, bolden, san-serif letters. This uses CSS code as its guidelines to setting text styles
		aContext.fillText("Daniel Fan", 150, 200); //this uses the aContext variable to call the fillText() method to display the intended string ("Daniel Fan") at x=150 and y=200 of the canvas coordinate system. The text displayed will be in the style of the elements defined above 
	}
	function getPicture() { // this creates a function that displays a picture on the HTML canvas element specified by a URL 
		var aPicture = document.getElementById("a"); //reference the comment with this code under the drawRectangle function
		var aContext = aPicture.getContext("2d"); //reference the comment with this code under the drawRectangle function
		var newImage = new Image(); // this creates a new varaible that defines an JS image element under newImage
		newImage.src = "https://i.ytimg.com/vi/MPV2METPeJU/maxresdefault.jpg" // this sets the source of the image variable to be retrived from the specified URL jpg 
		aContext.drawImage(newImage, 20, 20, 192, 108); // this uses the aContext variable to call the drawImage() method that displays the image specified by the newImage variable at x=20 and y=20. The next two numbers serve to scale the image and define the width(192 pixels) and the height (108 pixels)
	}

	function clearCanvas () { //this creates a function that clears all the canvas properties laid on by previous functions 
		var aPicture = document.getElementById("a"); //reference the comment with this code under the drawRectangle function
		var aContext = aPicture.getContext("2d"); //reference the comment with this code under the drawRectangle function
		aContext.clearRect(0, 0, aPicture.width, aPicture.height); // this uses the clearRect() method to effectively create a rectangle to which the pixels inside are cleared within. the first 2 numbers specify where the "rectangle" starts drawing to clear and the last 2 properties use the .length property to get the pixel dimensions of the canvas element to effectively clear the whole canvas. alternatively I can also just specific the width and length used when creating the canvas element 
	}

</script>



<style>	
.body {
     margin: 0em;
}
.page {
    width: 100vw;
    height: 100vh;
    position: fixed;
    top: 0;
    left: -100vw;
    overflow-y: auto;
    z-index: 0;
    background-color: hsl(0,0%,100%);
}
  .page:target {
    left: 0vw;
    z-index: 1;
}
</style>

<body>
<div id="header" class="w3-container w3-flat-carrot">
	<h1>App6---HTML5-Canvas</h1>
</div>
<div id="content" class="w3-container">

	<p>The following code has been developed by students and/or researchers of the Freshman Research Initiative DIY Diagnostics Stream at The University of Texas at 		Austin.  This code is shared for demonstration purposes and should not be considered a product -- it is for entertainment purposes only. Any user of this code 			does so at their own risk. Members of the DIY Stream, FRI, and The University of Texas system are not liable for anything related to this code.</p>

	<p>THIS CODE SHOULD NOT BE USED TO DIAGNOSE ANY KIND OF MEDICAL CONDITION.</p>
</div>

<div>
	<canvas id = "a" width = "400" height = "400" class="clear" style= "border:1px solid;float:center"></canvas> <!-- I created a canvas element. within the element, I included an ID attribute to which allows this specific canvas element to be accessed from the DOM in various portions of the code (which will be very needed in the JS part of this code). I also specified its width and height to be both 400. The string of attributes after style specifies a solid border that surrounds the perimeter of the border so that the canvas is not just blank in the final version of the code-->
</div>

<div>
		<a onclick = "drawRectangle();" class="w3-btn w3-grey w3-round">Draw Rectangle</a> <!- this creates a button (saying "Draw Rectangle") that, when pressed executes the drawRectangle() function on the JS portion of the code, which creates a rectangle on the canvas -> 
		<a onclick = "drawName();" class="w3-btn w3-grey w3-round">Draw Name</a> <!- this creates a button (saying "Draw Name") that, when pressed executes the drawName() function on the JS portion of the code, which prints my name in text on the canvas   ->
		<a onclick = "getPicture();" class="w3-btn w3-grey w3-round">Picture</a> <!- this creates a button (saying "Picture") that, when pressed executes the getPicture() function on the JS portion of the code, which prints a picture on the canvas ->
		<a onclick = "clearCanvas();" class="w3-btn w3-grey w3-round">Clear</a> <!- this creates a button (saying "Clear") that, when pressed executes the clearCanvas() function on the JS portion of the code, which clears the canvas ->
</div>

<footer class="w3-bottom w3-container w3-flat-carrot">
	<p>DIY!</p>
</footer>

</body>
</html>
